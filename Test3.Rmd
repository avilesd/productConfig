---
title: "test"
author: "Diego Aviles"
date: "Wednesday, July 29, 2015"
output:
  pdf_document:
    keep_tex: yes
---

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

Part 2:
```{r echo = FALSE, warning = FALSE, message= FALSE}
# Load all necessary information without showing it
library(productConfig)
load("current5_not_at_allclean.RData")
library(devtools)
devtools::load_all(".")

```

Attribute number 1 in our \texttt{camera\_data} is the digital camera's resolution. Consider the following: you want to research how the importance of the resolution attribute correlates with the prospect value of the chosen camera. Remember that the last round in the end configuration represents the specifications of the camera the user decided to choose. As the 'importance of the resolution attribute' we will use the relative sum of the values for the resolution category, throughout all rounds, for each user. Assuming the package is loaded, we first must extract the decision matrix for all users, but only for the first attribute, i.e. the resolution.
```{r, eval=FALSE}
x1 <- powerful_function(camera_data, userid= get_all_userids(camera_data),
                        FUN= decision_matrix, 
                        attr = 1, 
                        rounds="all")
```
```{r}
tail(x1, n= 4)
```
Then, we need to (1)sum all values for \texttt{attr1} for each user, (2) calculate how many rounds each user has and (3) divide the sum of the values with the total amount of rounds, for each user. The value of \texttt{x} is the one we are going to use as the x-axis value for our plot.
```{r, eval=FALSE}
x2 <- sapply(x1, sum)     ## sum gains (1)
x3 <- sapply(x1, length)  ## amount of rounds (2)
x <- x2/x3                ## relative gains
```
```{r}
tail(x)
```
Further, using only one the \texttt{powerful\_function} together with the \texttt{overall\_pv} in 'productConfig', the desired overall prospect values are obtained.
```{r,eval=FALSE}
y <- powerful_function(camera_data, userid= get_all_userids(camera_data), 
                       FUN=overall_pv, 
                       rounds= "last",
                       cost_ids= 4, 
                       attr= c(1,2,3,4))
y
```
```{r, echo=FALSE}
sapply(y, function(x) {x})
```
At this point cost\_ids............................................... To add another level of complexity to our analysis, assume you know need to include the influence of the amount of interaction the users had with the camera configurator. We can quantify this by using the amount of total clicks for each user. The more rounds a user has, the more he interacted with the configurator. The results can be obtained by inputting the \texttt{get\_rounds\_by\_ID} in our \texttt{powerful\_function}. As a second step, we use \texttt{sapply} to simplify the result from a list to a vector.
```{r}
z1 <- powerful_function(camera_data, userid= get_all_userids(camera_data),
                        FUN=get_rounds_by_ID)
z <- sapply(z1, length)  ## amount of clicks for all users

z
```
Using the \texttt{powerful\_function} in combination with other functions from our package and other 'R' auxiliary operations, we were able to mine the desired data. The values for \texttt{x, y, z} alone are difficult to analyze. 'R' offers different grapichal solutions for plotting data. Even though, plotting is outside of the scope of this package, we want to give an example so that the values for \texttt{x, y, z} can be better appreciated. For this purpose we use the \texttt{symbols} function from the \texttt{graphics} base-package from 'R' [16-17].

```{r}
symbols(x, y, circles= sqrt(z /pi), 
        inches= 0.40, fg="lightgray", 
        bg= rgb(235, 146, 1, alpha= 180, maxColorValue= 255),
        xlab="Relative gains in attribute 1", 
        ylab="Prospect value of end configuration (chosen product)")

```



